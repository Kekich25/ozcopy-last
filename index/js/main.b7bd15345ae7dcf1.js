(self.webpackChunk_ozon_ozon_ru=self.webpackChunk_ozon_ozon_ru||[]).push([["main"],{"817e5":function(e,t,n){"use strict";var r,o=n("98bae"),c=n("9a639"),l=n.n(c),d=n("b447a"),f=n.n(d),h=n("7d854"),y=n.n(h),v=!1,_={setup:function(e){v||(r=e)},getDayjsLocaleData:function(e){return y().Ls[e]},get dayJs(){return v||(v=!0,"function"==typeof r&&(r(y()),r=null)),y()}},m=n("ef77b");if(window.__i18n__){var w=window.__i18n__,k=w.dayjsLocaleData,S=w.buildDatesData;_.setup((function(e){e.extend(f()),e.locale(k(),null,!0)})),(0,m.jr)("default",(function(){return S(k)}))}var T=n("21bdb"),I=n.n(T),E=n("bd7eb"),N=n("145fc"),O=n("22321"),P=n("641bd"),C=n("0558e"),x=n("93e3b"),A=n("06040"),R=Object.assign({},{asyncType:{type:String,validator:function(e){return C.l.indexOf(e)>=0||void 0===e}},asyncHash:{type:String,default:""},trackingOn:{type:Boolean,default:!1},layoutPath:{type:String,default:""},index:{type:Number,default:0},platform:{type:String,default:""},widgetState:{type:String,default:"{}"},params:{type:String,default:"{}"},widgetTrackingInfo:A.t.trackingInfoProp},(0,o.__assign)({},(0,x.CE)(A.t,["etag","trackingInfoProp","widgetInitialState"])),{componentName:{type:String,default:""},vertical:{type:String,default:""}}),j=n("28508"),$={props:(0,o.__assign)({useWidgetRender:{type:Boolean,default:!1},useBlockRender:{type:Boolean,default:!1}},R),provide:function(){var e=(0,j.l)(this),t=e.state._get("browser",{}),n=e.state._get("experimentsConfig",{});return{useWidgetRender:this.useWidgetRender,useBlockRender:this.useBlockRender,layoutPath:this.layoutPath,useWebP:Boolean(t.webp),disableGalleryImage:Boolean(n.disableGalleryImage),disableMobileGalleryImage:Boolean(n.disableMobileGalleryImage),cdnImgHostname:t.cdnImgHostname,cdnOriginHostname:t.cdnOriginHostname,cdnVideoHostname:t.cdnVideoHostname,isDisableSrcSet:Boolean(n.disableSrcSet),alternativeHost1200:Boolean(n.alternativeHost1200),ignoreLazy:Boolean(t.ignoreLazy),isMobile:Boolean(!t.forceDesktop&&t.isMobile)||Boolean(t.accessibilityMode),isTesting:Boolean(e.state._get("o3Params.x-o3-ui-tests")),isTrinityEvent:Boolean(n.isTrinityEvent),isAccessibilityMode:Boolean(t.accessibilityMode),disableImages:Boolean(t.disableImages),sizeMode:t.sizeMode,colorMode:t.colorMode}}},M=n("4b060"),L=n.n(M),D=(0,o.__assign)((0,o.__assign)({},L()),{name:"NoSsr"});l().component(D.name,D);var W=n("134f1"),F=n.n(W),V=n("ab1ba").Q;l().use(F());var U=V instanceof Function?V:function(){return new(F().Store)(Object.assign({strict:!1},V))};var B=n("88568"),z=n("9e825"),G=n("b37d9");var H=n("65f40");function Z(e){var t="__plugin_"+e+"_installed__";l()[t]||(l()[t]=!0,l().use((function(){l().prototype.hasOwnProperty(e)||Object.defineProperty(l().prototype,e,{get:function(){return this.$root.$options[e]}})})))}var J=Object.entries({$config:"Config",$logger:"Logger",$tracker:"Tracker",$i18n:"Internationalization"});var K=n("d2f36"),X=n("3a817"),Q=n("82746"),Y=n("13851"),ee=n("290dc"),te=n("2a3f4"),ne=n("a55ac"),re=n("184e1"),ie=n("9bb28"),oe=n("cff8e"),ae=n("0958f"),se=n("d662e"),ce=n("6d954"),meta=n("2d545"),ue=n("a6cde"),le=n("90564"),de=n("191a8"),fe=n("23f99"),he=n("0cde5"),ge=n("e69d0"),pe=n("b32ab"),ye=n("07015"),ve=n("49886"),_e=n("12c94"),me=n("fc151"),be=n("b6e4b"),we=n("7dacc");function ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.isArray(e[0])?[]:{};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,o.__read)(e,2),r=t[0],c=t[1],l=n[r],d=c;(0,x.Kn)(l)&&(0,x.Kn)(d)?n[r]=ke(l,d):void 0===d?n[r]=(0,x._Z)(l)?ke(l):l:(0,x._Z)(d)?n[r]=ke(d):n[r]=d}))})),n}function Se(e,t,n){var r=n.layout,o=n.layoutModal,c=n.layoutNotify,l=n.triggerMutation,d=n.stateId;t instanceof me.m&&(t.setPayloadValue("layout",JSON.stringify(r)),t.setPayloadValue("layoutModal",JSON.stringify(o)),t.setPayloadValue("layoutNotify",JSON.stringify(c)),t.setPayloadValue("requestedStateId",d),t.setPayloadValue("triggerMutation",l)),e.error(t)}var Te=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.stateId===t)return{layer:e,widgetIndex:i};if(n.placeholders&&n.placeholders.length)for(var r=0;r<n.placeholders.length;r++){var o=Te(n.placeholders[r].widgets,t);if(o)return o}}return!1};function Ie(e,t){var n,r;if(!t)return!1;try{for(var c=(0,o.__values)(["layout","layoutModal","layoutNotify"]),l=c.next();!l.done;l=c.next()){var d=l.value;if(e[d]&&e[d].length){var f=Te(e[d],t);if(f)return f}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return!1}var Ee=function(e){function t(t,n,r){var o=e.call(this,t,{noFreezeServerState:!0})||this;return o._composerData=n,o._widgetStates=r,o}return(0,o.__extends)(t,e),Object.defineProperty(t.prototype,"serverWidgetStates",{get:function(){throw new Error("serverWidgetStates are available only on server")},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(){var e=this._composerData;return this._composerData=null,e},t.prototype.setRootState=function(body){var e=this;this.pushState((function(){var t=function(e,body){var t=Object.prototype.hasOwnProperty.call(body,"layoutModal"),n=I()(body,"trackingPayloads",{});return t?{trackingPayloads:Object.assign({},I()(e,"trackingPayloads",{}),n)}:{trackingPayloads:n}}(e.state,body);return Object.assign({},e.state,body,t)}))},t.prototype.mergeRootState=function(body){this.pushState((function(e){Object.assign(e,ke({},e,body))}))},t.prototype.deepSet=function(e){this.pushState((function(t){e.map&&"function"==typeof e.map&&(e.value=e.map(e.value),delete e.map),(0,ve.vueSet)(t,e.path,e.value)}))},t.prototype.removeWidgetByStateId=function(e){var t=this,n=e.stateId;this.pushState((function(e,r){try{var o=Ie(e,n);if(o)return void l().delete(o.layer,o.widgetIndex);throw new me.m(be._.WIDGET_NOT_FOUND_STATE_ID)}catch(o){r(),Se(t.$logger,o,{layout:e.layout,stateId:n,triggerMutation:"removeWidgetByStateId",layoutModal:e.layoutModal||"none",layoutNotify:e.layoutNotify||"none"})}}))},t.prototype.setWidgetPlaceholderByStateId=function(e){var t=this,n=e.stateId,r=e.placeholder;this.pushState((function(e,o){try{var c=Ie(e,n);if(c)return void function(e,t,n){if(e[t].placeholders){var r=(0,we.ph)(e[t].placeholders,n.name);if(!r.name){var o=e[t].placeholders.length;return void l().set(e[t].placeholders,o,n)}for(var c=e[t].placeholders.indexOf(r),i=0;i<n.widgets.length;i++)o=e[t].placeholders[c].widgets.length,l().set(e[t].placeholders[c].widgets,o,n.widgets[i])}else l().set(e[t],"placeholders",[n])}(c.layer,c.widgetIndex,r);throw new me.m(be._.WIDGET_NOT_FOUND_STATE_ID)}catch(r){o(),Se(t.$logger,r,{layout:e.layout,stateId:n,triggerMutation:"setWidgetPlaceholderByStateId",layoutModal:e.layoutModal||"none",layoutNotify:e.layoutNotify||"none"})}}))},t.prototype.setComposerDebug=function(data){this.pushState((function(e){Object.assign(e.debug,data)}))},t.prototype.setLayoutModal=function(e){this.pushState((function(t){l().set(t,"layoutModal",e)}))},t.prototype.setLayoutModalOptions=function(e){var t=e.options,n=void 0===t?{}:t,r=e.data,data=void 0===r?{}:r,c=e.url;this.pushState((function(e){var t=void 0===n.showModal||n.showModal,r=(0,o.__assign)((0,o.__assign)({},n),{showModal:t,url:c});"function"==typeof t&&(r.showModal=t(data)),l().set(e.shared,"layoutModalOptions",r)}))},t.prototype.setLayoutNotify=function(e){this.pushState((function(t){l().set(t,"layoutNotify",e)}))},t.prototype.setLayoutNotifyOptions=function(e){var t=e.options,n=void 0===t?{}:t,data=e.data;this.pushState((function(e){var t=void 0===n.showNotify||n.showNotify,r=(0,o.__assign)((0,o.__assign)({},n),{showNotify:t});"function"==typeof t&&(r.showNotify=t(data)),r.atoms&&r.atoms.length&&(r.nuclear=!0,delete r.atoms),l().set(e.shared,"layoutNotifyOptions",r)}))},t.prototype.setSharedState=function(e){void 0===e&&(e={}),this.pushState((function(t){(0,ve.vueSet)(t,"shared",Object.assign({},t.shared,e))}))},t.prototype.setTrackingPayloads=function(e){void 0===e&&(e={}),this.pushState((function(t){(0,ve.vueSet)(t,"trackingPayloads",Object.assign({},t.trackingPayloads,e))})),this.$tracker.legacyAnalyticsByKeyService.setTrackingPayloads(this.state.trackingPayloads)},t.prototype.setLocationState=function(e){void 0===e&&(e={}),this.pushState((function(t){(0,ve.vueSet)(t,"location",Object.assign({},t.location,e))}))},t}(_e.u),Ne=n("929ae"),Oe=(n("055b4"),n("3806d"),n("b67db"),n("76dcc"),n("cd098"),n("de608"),n("c7f10"),n("c92cd"),function(){function e(){this.singletons={},this.servicesInits={}}return e.prototype.register=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.servicesInits[e]=(0,o.__spread)([t],n)},e.prototype.registerEager=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.register.apply(this,(0,o.__spread)([e,t],n)),this.resolve(e)},e.prototype.resolve=function(e){if(!this.singletons[e]){var t=this.servicesInits[e];if(t){var n=(0,o.__read)(t),r=n[0],c=n.slice(1);delete this.servicesInits[e],this.singletons[e]=new(r.bind.apply(r,(0,o.__spread)([void 0],c)))}}return this.singletons[e]},e}()),Pe=function(){},Ce=function(e){function t(t){var n=e.call(this)||this;return n.configurationObj=(0,o.__assign)({},t),n}return(0,o.__extends)(t,e),t.prototype.get=function(e){return I()(this.configurationObj,e)},t}(Pe),xe=function(e){function t(t){var n=t.language,r=t.translations,o=t.pluralizer,c=e.call(this)||this;return c.language=n,c.pluralizer=o,c._translationsSource=r,c}return(0,o.__extends)(t,e),Object.defineProperty(t.prototype,"translations",{get:function(){return this._translations||(this._translations=new Map(Object.entries(this._translationsSource()||{})),this._translationsSource=null),this._translations},enumerable:!1,configurable:!0}),t.prototype.getCurrentLanguage=function(){return this.language},t.prototype.t=function(e,t){void 0===t&&(t={});var n=this.translations.get(e)||t.fallback||e;return this.f(n,t.substitutions||{})},t.prototype.p=function(e,t){return t[this.pluralizer(e)]},t.prototype.dayJs=function(e,t,n){return _.dayJs(e,t,n).locale(this.getCurrentLanguage())},t.prototype.dayJsUnix=function(e){return _.dayJs.unix(e).locale(this.getCurrentLanguage())},t.prototype.f=function(e,n){return e.replace(t.placeholderRegex,(function(e,t){if("'"===e.charAt(0))return e.substring(1);var r=n[t];return null!=r?String(r):""}))},t.placeholderRegex=/'?{(.*?)}/g,t}(Pe),Ae=function(e){function t(t){var n=window.__i18n__||{};return e.call(this,{language:t,pluralizer:n.pluralizer||function(e){return e},translations:n.translations||function(){return{}}})||this}return(0,o.__extends)(t,e),t}(xe),Re=n("91e89"),je=n("cc828"),$e={requests:5,debug:4,info:3,warning:2,error:1,critical:0},Me=["url","exception","stackTrace","userId","uuid","abGroup","payload","message","zone","serviceName","browser","platform","isMobile","errorCode","traceId","xcid","layoutId","response","traceId","experimentsConfig","pageType","disallowNames","nonexistNames","component","placeholderName","serviceName","error","vertical","stateId","widget","requestUrl","method","isMobile","isModern","debugInfo","forceMode","layout","layoutModal","layoutNotify","requestedStateId","triggerMutation","requestID"],Le=function(e){function t(t,n){var r=e.call(this)||this;return r.composerStore=t,r.composerRouter=n,r}return(0,o.__extends)(t,e),t.parseException=function(e){return e instanceof Error?{message:e.toString(),stackTrace:e.stack}:{}},t.parseData=function(data){void 0===data&&(data={}),"object"==typeof data&&data.exception instanceof Re.s&&(data=(0,o.__assign)((0,o.__assign)({},data),data.exception));var e={};if("function"==typeof data.toLoggerMessage){var n=data.toLoggerMessage(),r=n.payload,c=void 0===r?{}:r,l=n.message,d=void 0===l?{}:l;e.message=c.serviceName?d.value+" from service "+c.serviceName:d.value,e.zone=data.zone||d.zone,e.errorCode=d.errorCode,e.stack=data.stack,e.stackTrace=data.stack,e.exception=data.toString(),e.serviceName=c.serviceName,e.uuid=c.uuid,e.requestUrl=c.requestUrl,e.method=c.method,e.component=c.component,e.placeholderName=c.placeholderName,e.disallowNames=c.disallowNames,e.nonexistNames=c.nonexistNames,e.response=c.response,e.error=c.error,e.vertical=c.vertical,e.stateId=c.stateId,e.widget=c.widget,d.value===be._.WIDGET_NOT_FOUND_STATE_ID.value&&(e.layout=c.layout,e.layoutModal=c.layoutModal,e.layoutNotify=c.layoutNotify,e.requestedStateId=c.requestedStateId,e.triggerMutation=c.triggerMutation),e.debugInfo=data.getDebugInfo()}else data instanceof Error?Object.assign(e,t.parseException(data)):"object"==typeof data?(Object.assign(e,data),"object"==typeof data.message&&(e.message=data.serviceName?data.message.value+" from service "+data.serviceName:data.message.value,e.zone=data.message.zone,e.errorCode=data.message.errorCode)):e.payload=JSON.stringify(data,null," ");return e},t.prototype.log=function(data,e,n){void 0===data&&(data={}),void 0===e&&(e={}),void 0===n&&(n=data.level);var r={},c={};try{var l=this.composerStore.state._get("browser",{}),d=this.composerStore.state._get("debug",{}),f=this.composerStore.state._get("pageInfo",{}),h=this.composerStore.state._get("requestID");Object.assign(r,{browser:l.browser,platform:this.composerStore.state._get("client.platform"),isMobile:Boolean(l.isMobile),traceId:d.composer&&d.composer.traceId,xcid:d.xcid,experimentsConfig:this.composerStore.state._get("experimentsConfig",{}),url:this.composerRouter.current,pageType:f.pageType,layoutId:f.layoutId,isModern:"modern"===l.age,requestID:h})}catch(e){this.platformLog({message:je.b.GETTING_STORE_FIELDS_ERROR,exception:e,level:$e.critical})}try{Object.assign(r,{userId:this.composerStore.state._get("userInfo.user.userId")})}catch(e){this.platformLog({message:je.b.GETTING_STORE_FIELDS_ERROR,exception:e,level:$e.critical})}try{Object.assign(r,t.parseData(data))}catch(e){this.platformLog({message:je.b.PARSING_ERROR,exception:e,level:$e.critical})}try{Object.assign(r,e)}catch(e){this.platformLog({message:je.b.PARAMS_ERROR,exception:e,level:$e.critical})}Me.forEach((function(e){return r[e]&&(c[e]=r[e])})),this.platformLog((0,o.__assign)((0,o.__assign)({},c),{level:$e[n]||Number(n)||$e.info}))},t.prototype.requests=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.requests)},t.prototype.debug=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.debug)},t.prototype.info=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.info)},t.prototype.warning=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.warning)},t.prototype.error=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.error)},t.prototype.critical=function(data,e){void 0===data&&(data={}),void 0===e&&(e={}),this.log(data,e,$e.critical)},t}(Pe),De=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.config=r,o.installGlobalErrorHandlers(),o}return(0,o.__extends)(t,e),t.prototype.getLogger=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,t,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return this._logger?[3,2]:(e=this.composerStore.state._get("browser.isBot"),t=this.config.get("xapiDomain")+"/api/logs-gateway/input",[4,n.e("vendor-bxfelgr").then(n.t.bind(n,"672d5",23))]);case 1:r=o.sent().ClientLogger,this._logger=new r({apiUrl:t,level:this.config.get("logLevel"),token:this.config.get("gatewayKey"),isBot:e}),o.label=2;case 2:return[2,this._logger]}}))}))},t.prototype.addChunkNameInData=function(data){if(data&&data.exception instanceof TypeError){var e,t,n=data.exception.stack;switch(this.config.get("env")){case"prod":e=/\.ozone\.ru\/assets\/(?<chunkName>[a-z0-9-]+)\./,t=/\.ozone\.ru\/s3\/(?<chunkName>client-metrics)\//;break;case"stg":e=/\.ozone\.ru\/s3\/[-a-z0-9]*assets\/[a-z0-9.-]+\/(?<chunkName>[a-z0-9-]+)\./;break;case"local":e=/_nuxt\/(?<chunkName>[a-z0-9-]+)\./}if(e){var r=n.match(e);!r&&t&&(r=n.match(t)),r&&(data.chunkName=r.groups.chunkName,data.zone||(data.zone="script-error"))}}},t.prototype.platformLog=function(data){this.addChunkNameInData(data),this.getLogger().then((function(e){e.log(data)}))},t.prototype.installGlobalErrorHandlers=function(){var e=this,t=window.onerror,n=l().config.errorHandler,r=this.composerStore.state._get("browser.isBot"),c=function(t){var n=t.message,o=t.exception,c=t.zone;e.error({message:n||(o?o.message:"Unhandled error"),url:document.location.toString(),exception:o,isBot:r,zone:c})};window.onerror=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],l=e[4];t&&t.apply(void 0,(0,o.__spread)(e)),c({message:r,exception:l})},l().config.errorHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,o.__read)(e,1),l=r[0];n&&n.apply(void 0,(0,o.__spread)(e)),c({exception:l})},document.addEventListener("hydrationError",(function(){c({message:"hydration error",zone:"hydration"})}))},t}(Le);(0,n("cfd7e").gi)(),window.onAppReadyCbs=[],window.onAppReady=function(e){window.onAppReadyCbs.push(e)};l().config.devtools=("string"==typeof window.__NUXT__.state?window.__NUXT__.state.indexOf('"x-o3-vue-devtools":"true"')>=0:I()(window.__NUXT__.state,["o3Params","x-o3-vue-devtools"]))||Ne.yG;var We=function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){function t(e,t,n){var r=e.resolve("Config"),o=function(e,t){return{namespace:"bx",dev:!("prod"===e.get("env")),manager:{enable:Boolean(t.state._get("o3Params.x-o3-tracker-manager"))||Boolean((0,H.ej)(E.e7)),host:(0,H.ej)(E.QX)?E.Jz:void 0},metrics:{enable:Boolean(t.state._get("o3Params.x-o3-tracker-metrics"))||Boolean((0,H.ej)(E.Oy))},cspNonce:t.state._get("browser.cspNonce"),host:e.get("xapiDomain")+"/dlte/multi"}}(r,t),c=function(e){return{layoutTrackingInfo:e.state._get("layoutTrackingInfo",{}),browser:e.state._get("browser",{}),experimentsConfig:e.state._get("experimentsConfig",{}),pageToken:e.state._get("pageToken",{}),userToken:e.state._get("userToken",{})}}(t);e.register("Tracker",E.fs,o,c),e.register("Logger",De,t,n,r),e.register("Internationalization",Ae,t.state._get("language",Ne.k$))}function n(e,t,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return c=function(e,t){return function(n,r){if(!n)throw new Error("inject(key, value) has no key provided");if(void 0===r)throw new Error("inject(key, value) has no value provided");e[n="$"+n]=t[n]=r,Z(n)}}(e,t),c("composerStore",r),(0,Q.Z)(n,c),(0,ee.Z)(e),(0,te.Z)(e,c),[4,(0,ne.Z)(e)];case 1:return o.sent(),(0,ie.Z)(e),(0,oe.Z)(e),(0,ae.Z)(e),(0,se.Z)(),(0,ce.Z)(e),(0,meta.Z)(e),(0,re.Z)(e),(0,ue.Z)(),(0,de.Z)(e),(0,fe.Z)(e),(0,ye.Z)(r),(0,he.Z)(e),(0,ge.Z)(e),(0,pe.Z)(e),(0,Y.Z)(e),(0,le.Z)(),[2]}}))}))}var r,c,d,f,h,y,v,_,m,w;return(0,o.__generator)(this,(function(k){switch(k.label){case 0:"string"==typeof window.__NUXT__.state&&(window.__NUXT__.state=JSON.parse(window.__NUXT__.state)),l().config.silent=Ne.yv,l().config.performance=Ne.yG,performance&&performance.mark&&window.onAppReady((function(){return performance.mark("HYDRATION_TIME")})),window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},(0,N.p)(N.Z),(0,O.pm)(),k.label=1;case 1:return k.trys.push([1,4,,5]),r={},c={},window.__NUXT__&&window.__NUXT__.state&&(d=window.__NUXT__.state,Object.keys(d).forEach((function(e){X.GG.has(e)?c[e]=d[e]:r[e]=d[e]}))),(0,K.t)(r),(0,K.b)(r),(f=function(e){var t=e(),n=t.registerModule;return t.registerModule=function(path,e,r){return n.call(t,path,e,Object.assign({preserveState:!0},r))},t}(U)).replaceState(c),h=new Ee({deps:{diContainer:e}},r),(0,O.dT)(h),y=(0,O.qI)(h).catch((function(e){console.error(e)})),v=function(e){return(0,o.__assign)((0,o.__assign)({},$),{render:function(e){return e("div",{domProps:{id:"__ozon"}},[e(P.Z)])},store:e})}(f),_=function(e,t){var n=t.state._get("pageInfo.referrer"),r=t.state._get("browser.useSpa"),c={get $logger(){return e.resolve("Logger")},reinitAnalytics:function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return z.i.use(G.w).reinitAnalytics(),[2]}))}))},setComposerLayout:function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,z.i.use(G.w).setComposerLayout(e)];case 1:return[2,t.sent()]}}))}))},fetchComposerLayout:function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,z.i.use(G.w).fetchComposerLayout(e)];case 1:return[2,t.sent()]}}))}))}},l=new B.Router({baseUrl:"/",referrer:n,useSpa:r,app:c}),d=t.state._get("pageInfo.url");return l.replace(d,{silent:!0}),l}(e,h),t(e,h,_),z.i.configure({composerStore:h,composerRouter:_,diContainer:e}),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];J.forEach((function(n){var r=(0,o.__read)(n,2),c=r[0],l=r[1];t.forEach((function(t){Object.defineProperty(t,c,{enumerable:!0,get:function(){return e.resolve(l)}})})),Z(c)}))}(e,v,f),[4,n(v,f,_,h)];case 2:return k.sent(),[4,y];case 3:return k.sent(),(m=new(l())(v)).$mount("#__ozon"),l().nextTick((function(){window.onAppReadyCbs.forEach((function(e){"function"==typeof e&&e(m)}))})),[3,5];case 4:return w=k.sent(),(l().config.errorHandler||console.error)(w),[3,5];case 5:return[2]}}))}))};try{"string"==typeof window.__NUXT__.__CONFIG__&&(window.__NUXT__.__CONFIG__=JSON.parse(window.__NUXT__.__CONFIG__));var Fe=new Oe,Ve=Fe.registerEager("Config",Ce,window.__NUXT__.__CONFIG__||{}).get("invokeClientEntryDelay")||0,Ue=function(){We(Fe).catch((function(e){return console.error(e)}))},Be=function(e){e?setTimeout((function(){Ue()}),Ve):Ue()};"string"==typeof window.__NUXT__.state?Be(window.__NUXT__.state.indexOf('"enableClientEntryDelay":true')>=0):Be(I()(window.__NUXT__.state,["experimentsConfig","enableClientEntryDelay"]))}catch(e){console.error(e)}},"929ae":function(e,t,n){"use strict";n.d(t,{yG:function(){return r},yv:function(){return o},kq:function(){return c},k$:function(){return l}});var r=!1,o=!r,c=!1,l="ru"},f8fdb:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=Symbol("__isService"),o=function(){function e(e){this.__isService=r,this._deps={},this.configure(e.deps)}return Object.defineProperty(e.prototype,"$logger",{get:function(){if(this._deps.diContainer)return this._deps.diContainer.resolve("Logger")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$config",{get:function(){if(this._deps.diContainer)return this._deps.diContainer.resolve("Config")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$tracker",{get:function(){if(this._deps.diContainer)return this._deps.diContainer.resolve("Tracker")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$composerRouter",{get:function(){return this._deps.composerRouter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$composerStore",{get:function(){return this._deps.composerStore},enumerable:!1,configurable:!0}),e.prototype.configure=function(e){void 0===e&&(e={}),Object.assign(this._deps,e)},e}()},"31add":function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var r=function(){function e(){this.services=new Map}return e.prototype.configure=function(e){this.deps?Object.assign(this.deps,e):this.deps=Object.assign({},e)},e.prototype.use=function(e){var t=this.services.get(e);if(!t){if(!this.deps)throw new Error("Registry is not configured - deps are empty");if("function"!=typeof e||!e.prototype)throw new Error("registry.use() received a non-constructor");t=new e({deps:this.deps}),this.services.set(e,t)}return t},e}()},"91e89":function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var r=function(){function e(e){this.message=e,this.name="Error";var t=new Error;t.stack&&(this.stack=t.stack)}return e.prototype.toString=function(){return this.message+this.stack},e}()},"5ea39":function(e,t,n){"use strict";n.d(t,{H:function(){return c}});var r=n("98bae"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.payload={},t}return(0,r.__extends)(t,e),t.prototype.setPayloadValue=function(e,t){this.payload[e]=t},t.prototype.getPayload=function(){return this.payload},t.prototype.toString=function(){return this.message+" with payload: "+JSON.stringify(this.getPayload())+" "+this.stack},t}(n("91e89").s),c=function(e){function t(t){var n=e.call(this,t.value)||this;return n.type=t,n}return(0,r.__extends)(t,e),t.prototype.setLevel=function(e){this.level=e},t.prototype.getLevel=function(){return this.level},t.prototype.toLoggerMessage=function(){return{message:this.type,payload:this.getPayload()}},t.prototype.getType=function(){return this.type},t.prototype.getDebugInfo=function(){return this.getPayload()},t}(o)},fc151:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n("98bae"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.toLoggerMessage=function(){var e=this.getPayload(),t=this.getNonallowedNames(e);return{message:this.getType(),payload:(0,r.__assign)((0,r.__assign)({stack:e.stack,widget:e.widget,placeholderName:e.placeholderName},t),{component:e.component,stateId:e.stateId,vertical:e.vertical,error:e.error,layout:e.layout,layoutModal:e.layoutModal,layoutNotify:e.layoutNotify,requestedStateId:e.requestedStateId,triggerMutation:e.triggerMutation})}},t.prototype.getDebugInfo=function(){var e=this.getPayload(),t=this.getNonallowedNames(e);return(0,r.__assign)((0,r.__assign)({placeholderName:e.placeholderName},t),{component:e.component})},t.prototype.getNonallowedNames=function(e){return e.disallowNames?{disallowNames:e.disallowNames}:{nonexistNames:e.nonexistNames}},t}(n("5ea39").H)},ab1ba:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var r=n("98bae"),o=["getters","actions","mutations"],c={};try{c={modules:{},mutations:{},actions:{}};try{l(n("410ba"),"composer")}catch(e){}try{l(n("041e5"),"authorization")}catch(e){}try{l(n("5862b"),"cartGlobal")}catch(e){}try{l(n("e2f60"),"favorites")}catch(e){}try{l(n(Object(function(){var e=new Error("Cannot find module '~/teams/common/store/location'");throw e.code="MODULE_NOT_FOUND",e}())),"location")}catch(e){}try{l(n("180da"),"modalLogin")}catch(e){}try{l(n("59739"),"modalSupermarket")}catch(e){}try{l(n("11efd"),"notifications")}catch(e){}try{l(n("e38ca"),"search")}catch(e){}try{l(n("5bb1e"),"subscriptionModal")}catch(e){}try{l(n("93c1f"),"userInfo")}catch(e){}try{l("513af","cms")}catch(e){}try{l(n("9db63"),"communication")}catch(e){}try{l(n("54bd4"),"premium")}catch(e){}try{l(n("07294"),"subscriptions")}catch(e){}try{l(n("d915c"),"wallet")}catch(e){}try{l(n("7a282"),"csma"),l(n("d26bf"),"csma/orderlist")}catch(e){}try{l(n("03e54"),"marketing"),l(n("86394"),"marketing/favorite")}catch(e){}try{l(n("4a919"),"payments"),l(n("7e117"),"payments/loan")}catch(e){}try{l(n("72689"),"reviews")}catch(e){}try{l(n("61a84"),"travel"),l(n("2b102"),"travel/travel-popular-destinations")}catch(e){}}catch(e){console.log(e)}function l(e,t){var n,l;e=e.default||e;var h=t.replace(/\.(js|ts|vue)$/,"").split("/"),y=h[h.length-1];if(o.includes(y)){var v=y;f(d(c,h,{isProperty:!0}),e,v)}else{"index"===y&&h.pop();var _=d(c,h);try{for(var m=(0,r.__values)(o),w=m.next();!w.done;w=m.next()){f(_,e[v=w.value],v)}}catch(e){n={error:e}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(n)throw n.error}}!1===e.namespaced&&delete _.namespaced}}function d(e,t,n){var r=(void 0===n?{}:n).isProperty,o=void 0!==r&&r;if(!t.length||o&&1===t.length)return e;var c=t.shift();return e.modules[c]=e.modules[c]||{},e.modules[c].namespaced=!0,e.modules[c].modules=e.modules[c].modules||{},d(e.modules[c],t,{isProperty:o})}function f(e,t,n){t&&(e[n]=Object.assign({},e[n],t))}},"06040":function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r={stateId:{type:String,default:""},vertical:{type:String,required:!0},componentName:{type:String,required:!0},version:{type:Number,default:null},root:{type:Boolean,default:!1},placeholders:{type:Array,default:function(){return[]}},etag:{type:String,default:null},trackingInfoProp:{type:[Object,String],default:function(){return{}}},widgetInitialState:{type:Object,default:function(){return{}}},widgetToken:{type:String,default:void 0}}},"2ebb1":function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var r=n("98bae"),o=["block-horizontal.default","wallpaper.default","block-vertical.default","grid-column.default","container.default","paginator.default","sticky-container.top","sticky-container.middle","sticky-container.bottom","sticky-container.default","shop-in-shop-container.default","pdp.grid.default","pdp.containerFixed.default","pdp.tabs","pdp.default","wrapper.default"];function c(e,map){Object.entries(e).forEach((function(e){var t=(0,r.__read)(e,2),n=t[0],component=t[1],content=component.content,c=(0,r.__rest)(component,["content"]);map.content[n]=content,map.params[n]=c,map.places[n]=function(e){var t=e.places||[];return t.length?e.extendPlaces?(0,r.__spread)(o,t):t:o}(c)}))}},22321:function(e,t,n){"use strict";n.d(t,{J5:function(){return _},ds:function(){return m},Kl:function(){return w},pm:function(){return k},dT:function(){return S},qI:function(){return T}});var r=n("98bae"),o=n("145fc"),c=n("2ebb1"),l=n("fdef6"),d=n("cfd7e"),f={};function h(e){var t=(0,d.oE)(e);"object"==typeof t&&((0,c.j)(t,o.Z),(0,d.iY)(e))}function y(e,t){"function"!=typeof window.__getPublicPath[e]&&(window.__getPublicPath[e]=function(){return t.publicPath})}function v(e){return e.state._get("verticalInfo",{})}function _(e,t){return e in v(t)}function m(e){return!!(0,d.oE)(e)}function w(e,t){if(f[e])return f[e];var n=v(t)[e];if(!n)return Promise.resolve();if(!n.publicPath)return Promise.reject(new Error('Federation: publicPath is missing in remote vertical "'+e+'" info'));if(!n.initial||!n.initial.length)return Promise.reject(new Error('Federation: initial assets are missing in remote vertical "'+e+'" info'));y(e,n);var o=n.initial.map((function(e){return n.publicPath+e})),c=t.state._get("browser.cspNonce"),d=o.filter((function(e){return e.endsWith(".js")})).map((function(e,t,n){return[(0,l.hT)(e,c,1===n.length),e]})),_=o.filter((function(e){return e.endsWith(".css")})).map((function(e){return[(0,l.EW)(e,c),e]})),m=(0,r.__spread)(_,d).map((function(t){var n=(0,r.__read)(t,2),o=n[0],c=n[1];return new Promise((function(t,n){var r=window.setTimeout((function(){l(),n(new Error("Federation: loading initial file "+c+' for remote vertical "'+e+'" has timed out'))}),6e4),l=function(){window.clearTimeout(r),o.removeEventListener("load",d),o.removeEventListener("error",f),o.parentNode&&o.parentNode.removeChild(o)},d=function(){l(),t()},f=function(){l(),n(new Error("Federation: loading initial file "+c+' for remote vertical "'+e+'" failed'))};o.addEventListener("load",d),o.addEventListener("error",f),document.head.appendChild(o)}))})),w=Promise.all(m).then((function(){h(e)})).finally((function(){delete f[e]}));return f[e]=w,w}function k(){var e=(0,d.gi)();Object.keys(e.composerComponents).forEach((function(e){h(e)}))}function S(e){Object.entries(v(e)).forEach((function(e){var t=(0,r.__read)(e,2);y(t[0],t[1])}))}function T(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,o,c,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=new Set,Object.keys(v(e)).forEach((function(e){m(e)||t.add(e)})),n=function(e,r){return void 0===r&&(r=new Set),e.forEach((function(e){t.has(e.vertical)&&r.add(e.vertical),e.placeholders&&e.placeholders.length&&e.placeholders.forEach((function(e){e.widgets&&e.widgets.length&&n(e.widgets,r)}))})),r},o=e.state._get("layout",[]),(c=n(o)).size?(l=[],c.forEach((function(t){l.push(w(t,e))})),[4,Promise.allSettled(l)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}},d2f36:function(e,t,n){"use strict";n.d(t,{t:function(){return o},b:function(){return c}});var r=n("3a817");function o(data){return data.shared&&"string"==typeof data.shared&&(data.shared=JSON.parse(data.shared)),data.layoutTrackingInfo&&"string"==typeof data.layoutTrackingInfo&&(data.layoutTrackingInfo=JSON.parse(data.layoutTrackingInfo)),data}function c(data){data.userInfo=data.userInfo||(0,r.pN)()}},"7dacc":function(e,t,n){"use strict";n.d(t,{Yw:function(){return d},L2:function(){return f},V0:function(){return h},ph:function(){return y}});var r=n("21bdb"),o=n.n(r),c=n("b6e4b"),l=n("5ea39");function d(e,t,n){var r=function(e,t,n){return null!=e&&"object"==typeof e||!t||n?null:new l.H(c._.WIDGET_STATE_NOT_FOUND)}(e,t,n);if(null!==r)throw r}function f(e){var t=e.propsData,n=t.vertical,r=t.componentName,c=t.version;return[n,r,o()(window,"__NUXT__.state.browser.isDesktop")?"desktop":"mobile",c].join("_").toUpperCase()||"widget"}function h(e,t){switch(typeof e){case"string":e=JSON.parse(e);break;case"object":e=Object.assign({},e);break;default:return void t(new l.H(c._.WIDGET_WRONG_SET_STATE))}return e}function y(e,t){if(void 0===e&&(e=[]),!Array.isArray(e))throw new Error("\n          Expect placeholders must be Array, got "+typeof e+".\n          "+(e?JSON.stringify(e):"")+"\n        ");return e.find((function(e){return e.name===t}))||{name:"",widgets:[]}}},a287c:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n("98bae"),o=function(e){function t(t){return e.call(this,t)||this}return(0,r.__extends)(t,e),t}(n("4e3d9").N)},"0ea7f":function(e,t,n){"use strict";n.d(t,{n:function(){return N}});var r=n("98bae"),o=n("21bdb"),c=n.n(o),l=n("c9e1e"),d=n("f8fdb"),f=n("93b8f"),h=function(){function e(e,t){void 0===e&&(e={}),this.fetchImpl=t.fetchImpl,this.defaultConfig=(0,r.__assign)((0,r.__assign)({},e),{headers:(0,r.__assign)({Accept:"application/json"},e.headers)})}return e.prototype.request=function(e){var t={credentials:"include",body:e.data,method:e.method,headers:(0,r.__assign)((0,r.__assign)({},this.defaultConfig.headers),e.headers)};return e=(0,r.__assign)((0,r.__assign)({},e),{timeout:e.timeout||this.defaultConfig.timeout}),this.getFetchPromise(t,e)},e.prototype.getFetchPromise=function(e,t){var n=this,o=new AbortController;e.signal=o.signal;return new f.CancelablePromise((function(c,l,d){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n,f,h,y,data,v,_;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:d((function(){o.abort()})),r.label=1;case 1:return r.trys.push([1,6,,7]),[4,this.fetchImpl(t.url,e)];case 2:return(n=r.sent()).ok&&"stream"===t.responseType?[2,c({data:n.body,headers:n.headers})]:n.ok&&"blob"===t.responseType?[4,n.blob()]:[3,4];case 3:return f=r.sent(),[2,c({data:f,headers:n.headers})];case 4:return h=n.headers.get("content-type"),y=!h||h.includes("application/json"),[4,n.text()];case 5:if(data=r.sent(),v={data:data,headers:n.headers,status:n.status,aborted:o.signal.aborted},y&&data.length>0)try{data=v.data=JSON.parse(data)}catch(e){return[2,l({error:e,response:v})]}return n.ok?[2,c({data:data,headers:n.headers})]:[2,l({response:v})];case 6:return _=r.sent(),[2,l({error:_,response:n})];case 7:return[2]}}))}))}))},e}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.toLoggerMessage=function(){var e=this.getPayload();return{message:this.getType(),payload:{stack:e.stack,requestUrl:e.requestUrl,method:e.method,serviceName:e.serviceName,uuid:e.uuid,statusCode:e.statusCode}}},t.prototype.getDebugInfo=function(){return this.getPayload()},t}(n("5ea39").H),v=n("cb21f"),_=n("93e3b"),m=n("7a121"),w=n("8aae8"),k=n("12854"),S=n("739f8"),T=/\/_action(\/)?v2($|\?|\/)/,I=["post","put","delete"],E=function(e){var t=e&&"object"==typeof e&&e.response||{};return Promise.reject(t)},N=function(e){function t(t,n){var r=(void 0===n?{}:n).requestController,o=e.call(this,t)||this;return o.rejectWithResponse=E,o._requestController=r,o}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"requestController",{get:function(){return this._requestController||(this._requestController=new h({timeout:this.$config.get("defaultApiTimeout"),headers:(0,w.d)(this.$composerStore.state._get("client.platform"))},{fetchImpl:window.fetch.bind(window)})),this._requestController},enumerable:!1,configurable:!0}),t.prototype.callApi=function(e,t){var n=this,o=(0,S.h4)(this.serviceVersion),c=e.fromRoot?(0,S.P$)():(0,S.Jl)(this.$config.get("apiGateway")),l=(0,S.iX)(this.servicePath,c),d={url:(0,S.hy)(l,o,e.path),method:e.method,widgetToken:e.widgetToken,serviceName:this.serviceName,headers:{}},f=new Error;f.stack&&(d.stackTrace=f.stack.split("\n").slice(3).join("\n")),void 0!==e.timeout&&(d.timeout=e.timeout),(0,_._Z)(t)||"text/plain"===e.contentType||(t={}),t instanceof FormData||(d.headers["Content-Type"]="string"==typeof e.contentType?e.contentType:"application/json"),"string"==typeof e.responseType&&(d.responseType=e.responseType),I.includes(d.method.toLowerCase())?d.data=(0,S._d)(t,e.contentType):"object"==typeof t&&(d.url=(0,k.At)(d.url,t));var h=this.requestController.request(d);return h.then((function(e){return(0,r.__awaiter)(n,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){try{this.onRequestSuccess(e,d)}catch(e){this.$logger.error({exception:e,zone:"api"})}return[2]}))}))})).catch((function(e){return(0,r.__awaiter)(n,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){try{this.onRequestError(e,d)}catch(e){this.$logger.error({exception:e,zone:"api"})}return[2]}))}))})),h},t.prototype.fetch=function(e,t){return this.callApi(e,t).then((function(e){return e.data}))},t.prototype.onRequestSuccess=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o,data,l,d,f,h,y,v,_,m,w,k=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(n=t.url.match(T))&&(o=e.data,e.data=o.data,e.originalData=o),data=e.data,l=e.headers,c()(data,"browser.useSpa")&&(d=c()(data,"pageInfo.url"),f=l.get("x-o3-trace-id"),this.$composerStore.setComposerDebug({pageUrl:d,traceId:f})),n&&"object"==typeof e.originalData?(h=c()(e.originalData,"trackingPayloads"),y=c()(e.originalData,"trackingInfo"),v=c()(e.originalData,"pageToken"),_=c()(e.originalData,"userToken"),m=c()(e.originalData,"experimentsConfig.isTrinityEvent",!1),e.originalData.error?(this.$logger.error({message:e.originalData.error,zone:"api"}),[2]):h&&"object"==typeof h?[4,this.$composerStore.setTrackingPayloads(h)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return y&&"object"==typeof y&&(w=t.widgetToken,Object.keys(y).forEach((function(e){if(y[e].actionType){var t={widgetToken:w,pageToken:v,userToken:_};k.$tracker.legacyAnalyticsByKeyService.send(t,y[e],{},m)}}))),[2]}}))}))},t.prototype.onRequestError=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o,c,d,f;return(0,r.__generator)(this,(function(r){if(n=e.response,o=v.F.ERROR_GETTING_RESPONSE,n)switch(c=Number(n.status)){case 404:o=v.F.REQUEST_FAIL_NOT_FOUND;break;case 401:o=v.F.REQUEST_FAIL_AUTH_ERROR;break;default:Object.assign(o,v.F.REQUEST_FAIL),o.value=""+o.value+c+" error"}return(d=new y(o)).setLevel(l.p9.ERROR),d.setPayloadValue("serviceName",t.serviceName),d.setPayloadValue("requestUrl",t.url),d.setPayloadValue("method",t.method),c&&d.setPayloadValue("statusCode",c),f=encodeURIComponent(window.location.host),d.setPayloadValue("uuid",window.btoa((0,m.O1)(f,12))),this.$logger.error(d),[2]}))}))},t}(d.w)},"12c94":function(e,t,n){"use strict";n.d(t,{u:function(){return y}});var r=n("98bae"),o=n("06c58"),c=n("21bdb"),l=n.n(c),d=n("f8fdb"),f=(n("ad646"),{_get:function(path,e){return l()(this,path,e)}}),h=function(e){return Object.assign(Object.create(f),e)},y=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this,t)||this;return r._noFreezeServerState=n.noFreezeServerState,r}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"stateSubject",{get:function(){return this._stateSubject||(this._stateSubject=new o.X(this._getInitialState())),this._stateSubject},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return h(this.stateSubject.getValue())},enumerable:!1,configurable:!0}),t.prototype._getInitialState=function(){return h(this.getInitialState()||{})},t.prototype.onNextState=function(e){var t=this;return this.stateSubject.subscribe((function(n){try{var r=e(n);r&&"object"==typeof r&&"function"==typeof r.catch&&r.catch((function(e){t.$logger.error({exception:e,zone:"store"})}))}catch(e){t.$logger.error({exception:e,zone:"store"})}}))},t.prototype.pushState=function(e){var t=this.state,n=!1,r=e(t,(function(){n=!0}));n||(r=void 0===r?t:h(r),this.stateSubject.next(r))},t}(d.w)},"7e2f3":function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n("98bae"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value={},t}return(0,r.__extends)(t,e),t.prototype.getInitialState=function(){return this.value},t.prototype.next=function(e,t){var n=this;if(void 0===e&&(e={}),void 0===t&&(t={}),"object"!=typeof e)throw new Error("Widget states must be object");t.replace?this.value=e:this.value=Object.assign(this.value,e),t.silent||this.pushState((function(){return n.value}))},t}(n("12c94").u)},"4e3d9":function(e,t,n){"use strict";n.d(t,{N:function(){return d}});var r=n("98bae"),o=n("8237a"),c=n("aa0de"),l=n("f8fdb"),d=(n("ad646"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"eventsSubject",{get:function(){return this._eventsSubject||(this._eventsSubject=new o.xQ),this._eventsSubject},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events$",{get:function(){return this.eventsSubject.asObservable()},enumerable:!1,configurable:!0}),t.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length<2?{name:e[0]}:{name:e[0],payload:e[1]};return this.eventsSubject.next(n),this},t.prototype.listen=function(e,t){var n=this;var r=Array.isArray(e)?e:[e],o=this.eventsSubject.pipe((0,c.h)((function(e){return r.includes(e.name)}))).subscribe((function(e){var r=n.$logger||console;try{var c=t(e,o);c&&"object"==typeof c&&"function"==typeof c.catch&&c.catch((function(e){r.error({exception:e})}))}catch(e){r.error({exception:e})}}));return o},t}(l.w))},"6389b":function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n("8237a"),o=n("aa0de"),c=n("c9e1e"),l=new(function(){function e(t){if(void 0===t&&(t=!0),this.cartItemsMap=new Map,e.instance)return e.instance;t&&(this.$events=new r.xQ),this.clientFlags||(this.clientFlags={}),e.instance=this}return Object.defineProperty(e.prototype,"$favEvents",{get:function(){return this.$events.pipe((0,o.h)((function(e){return e.name===c.Ki.Favorites})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$favCountEvents",{get:function(){return this.$events.pipe((0,o.h)((function(e){return e.name===c.Ki.FavoritesCount})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$clientFlags",{get:function(){return this.$events.pipe((0,o.h)((function(e){return e.name===c.Ki.SetClientFlag})))},enumerable:!1,configurable:!0}),e.prototype.dispatch=function(e,t){"object"==typeof e&&null!==e?this.$events.next(e):this.$events.next({name:e,payload:t})},e.prototype.getClientFlag=function(e){return this.clientFlags[e]||!1},e.prototype.setClientFlag=function(e,t){this.dispatch(c.Ki.SetClientFlag,{flag:e,value:t}),this.clientFlags[e]=t},e.prototype.setShowLocationModal=function(e){this.setClientFlag(c.Mx.LocationModal,e)},e.prototype.setShowAdultModal=function(e){this.setClientFlag(c.Mx.AdultModal,e)},e.prototype.getAdultFlag=function(){return this.getClientFlag(c.Mx.AdultModal)},e.prototype.subscribeOnce=function(e){var t=this.$events.subscribe((function(n){e(n),t.unsubscribe()}))},e.prototype.filterByEventName=function(e){return this.$events.pipe((0,o.h)((function(t){return t.name===e})))},e.instance=null,e}())},b911e:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n("98bae"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.serviceName="location",t.serviceVersion="2",t.servicePath="location",t}return(0,r.__extends)(t,e),t.prototype.current=function(e){return this.fetch({method:"get",path:"/current"},e.ip?{ip:e.ip}:{})},t.prototype.search=function(e){return this.fetch({method:"get",path:"/search"},e.query?{query:e.query}:{}).then((function(data){return Array.isArray(data)?data.slice(0,10):[]})).catch((function(e){return console.error("Failed request to location api: "+(e.message||e)),Promise.reject()}))},t.prototype.user=function(e){return this.fetch({method:"post",path:"/user/location"},{AreaId:e.areaId,DefaultAreaId:void 0===e.defaultAreaId?e.areaId:e.defaultAreaId,UserAgent:navigator&&navigator.userAgent})},t.prototype.areas=function(e){return void 0===e&&(e={areaId:2}),this.fetch({method:"get",path:"/areas/"+(e.areaId||2)})},t}(n("0ea7f").n)},"1de72":function(e,t,n){"use strict";var r=n("21bdb"),o=n.n(r),c=n("bd7eb");t.Z={methods:{sendClickEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.CLICK_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e})},sendViewEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.VIEW_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e})},sendShowEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.SHOW_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e||{}})},sendFavEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.FAVORITE_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e||{}})},sendUnFavEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.UNFAVORITE_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e||{}})},sendCloseEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.CLOSE_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e||{}})},sendSetEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.SET_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e||{}})},sendImpressionEvent:function(e,t){this.$tracker.legacyAnalyticsService.send(c.rr.IMPRESSION_ACTION,{widget:this.trackingInfo||{},slice:t||o()(this.widgetState,"sliceTrackingInfo",{}),cell:e})},sendCustomEvent:function(e,t,n){this.$tracker.legacyAnalyticsService.send(e,{widget:this.trackingInfo||{},slice:n||o()(this.widgetState,"sliceTrackingInfo",{}),cell:t||{}})}}}},c229b:function(e,t,n){"use strict";var r=n("98bae"),o=n("9e825"),c=n("9289b");t.Z={methods:{setCookie:function(e){return(0,r.__awaiter)(this,void 0,Promise,(function(){var t,n,l,d,f,param,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:for(param in t=e.key,n=e.value,l=e.options,f="path=/;",d=void 0===l?{}:l)f+=param+"="+d[param]+";";return h={cookies:[{name:t,value:n,params:f}]},[4,o.i.use(c.E).actionPost({name:"setUserCookies",data:h})];case 1:return r.sent(),[2]}}))}))}}}},"5a300":function(e,t,n){"use strict";var r=n("21bdb"),o=n.n(r);t.Z={methods:{sendAnalytics:function(e,t,n){void 0===n&&(n={});var r=this.getCell(t),o=this.widgetState.sliceTrackingInfo;"string"!=typeof r&&"string"!=typeof o?this.$tracker.legacyAnalyticsService.send(e,{widget:this.trackingInfo,slice:this.sliceTrackingInfo||{},cell:r,custom:n}):this.sendAEvent({actionType:e,key:r,sliceKey:o},n)},getCell:function(e){return o()(this,"widgetState.cellTrackingInfo."+e)}}}},34213:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n("98bae"),o=n("21bdb"),c=n.n(o),l=n("bd7eb"),d={mixins:[{methods:{sendAddToCartEvent:function(e,t,n){void 0===e&&(e={}),this.$tracker.legacyAnalyticsService.send(l.rr.TO_CART_ACTION,{widget:this.trackingInfo||e,slice:n||c()(this.widgetState,"sliceTrackingInfo",{}),cell:t||{}})},sendRemoveFromCartEvent:function(e,t,n){void 0===e&&(e={}),this.$tracker.legacyAnalyticsService.send(l.rr.REMOVE_ACTION,{widget:this.trackingInfo||e,slice:n||c()(this.widgetState,"sliceTrackingInfo",{}),cell:t||{}})}}}],methods:{isShowBuyButton:function(e){return this.addToCart&&""!==e.saleType&&""!==e.bookType},trackAddToCart:function(e,t,n){void 0===n&&(n={});var o=e.cellTrackingInfo||e;this.sendAddToCartEvent(n,(0,r.__assign)((0,r.__assign)({},o),{totalQuantity:t}))},trackRemoveFromCart:function(e,t,n){void 0===n&&(n={});var o=e.cellTrackingInfo||e;this.sendRemoveFromCartEvent(n,(0,r.__assign)((0,r.__assign)({},o),{totalQuantity:t}))}}}},"3bae6":function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n("98bae"),o=n("9a639"),c=n.n(o),l=n("49886"),d=n("21bdb"),f=n.n(d),h=n("9e825"),y=n("b37d9"),v={name:"InViewportMixin",created:function(){this.widgetInViewport=!1,this.viewportEvents=[]},mounted:function(){var e=this;this.intersectionObserver=new IntersectionObserver((function(t){var n=t[0];if(!n)return!1;e.viewportEvents=e.viewportEvents.filter((function(e){return e.params.sendAlways?(e.callback(n.isIntersecting),!0):!n.isIntersecting||(e.callback(!0),!(e.params.once&&!e.params.store))}))})),this.reloadObserverSubscription=h.i.use(y.w).listen("GET_LAYOUT",(function(){e._reloadObserver()})),this.registerViewportEvent((function(t){e.widgetInViewport=t}),{sendAlways:!0}),this._bindViewportEvents()},beforeDestroy:function(){this._unbindViewportEvents(),this.reloadObserverSubscription&&this.reloadObserverSubscription.unsubscribe()},methods:{registerViewportEvent:function(e,t){void 0===t&&(t={});var n=function(e,t){return void 0===t&&(t={}),{params:t,callback:e,viewed:!1}}(e,t);return this.viewportEvents.push(n),n},_reloadObserver:function(){var e=this;this.$nextTick((function(){e.$el instanceof HTMLElement&&(e.intersectionObserver.unobserve(e.$el),e.intersectionObserver.observe(e.$el))}))},_bindViewportEvents:function(){this.$el instanceof HTMLElement&&this.intersectionObserver.observe(this.$el)},_unbindViewportEvents:function(){this.intersectionObserver.disconnect()}}},_=n("134f1"),m={data:function(){return{hooks:{}}},methods:{hook:function(e,t,n){void 0===n&&(n={}),this.hooks[e]=this.hooks[e]||[],this.hooks[e].push({callback:t,params:n})},callHook:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!this.hooks[e])return[3,4];n=0,r.label=1;case 1:return n<this.hooks[e].length?[4,(o=this.hooks[e][n]).callback.apply(this,t)]:[3,4];case 2:r.sent(),o.params.once&&(this.hooks[e].splice(n,1),n--),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}},beforeDestroy:function(){this.hooks=[]}},w=n("b6e4b"),k=n("fc151"),S=n("5ea39"),T=n("9289b"),I=n("0558e"),E=n("28508"),N={mixins:[m,v],data:function(){return{isAsyncLoading:!1,isAsyncLoaded:!1,isAsyncDelay:!1,isAsyncFailed:!1,asyncLoadEvent:null}},props:{asyncType:{type:String,validator:function(e){return I.l.indexOf(e)>=0||void 0===e}},asyncHash:{type:String,default:""}},computed:{showAsyncLoader:function(){return this.asyncType&&!this.isAsyncLoaded}},created:function(){if(this.asyncType&&!this.asyncHash){var e=new k.m(w._.WIDGET_ASYNC_WITHOUT_HASH);return this.$logger.error(e),!1}this._tryToRegisterViewEvent()},mounted:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return this.checkWidgetStateSubscription=h.i.use(y.w).listen(["GET_LAYOUT","SET_COMPOSER_LAYOUT"],(function(){e.checkWidgetState()})),[4,this._tryToLoadOnMount()];case 1:return t.sent(),[2]}}))}))},beforeDestroy:function(){this.checkWidgetStateSubscription&&this.checkWidgetStateSubscription.unsubscribe()},methods:(0,r.__assign)((0,r.__assign)({},(0,_.mapActions)("composer",{_replaceSharedStoreAction:"REPLACE_SHARED_STORE"})),{preventAsyncFetch:function(){this.isAsyncDelay=!0},checkWidgetState:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,r.__generator)(this,(function(t){return this.$nextTick((function(){return(0,r.__awaiter)(e,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return this.widgetState&&Object.keys(this.widgetState).length?[2]:this.isAsyncLoaded||this.isAsyncLoading?(this.isAsyncLoaded=this.isAsyncLoading=!1,this._tryToRegisterViewEvent(),[4,this._tryToLoadOnMount()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})),[2]}))}))},fetchAsyncState:function(e,t){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),(0,r.__awaiter)(this,void 0,Promise,(function(){var n,o,c,l,d,f,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=this._getAsyncWidgetApi(),c=(o=this).asyncHash,l=o.componentName,d={asyncHash:c,componentName:l},void 0!==e&&(d.extraBody=e),void 0!==t&&(d.url=t),this.isAsyncLoading=!0,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,n(d)];case 2:return f=r.sent(),[4,this._replaceAsyncState(f,e)];case 3:return r.sent(),[3,5];case 4:throw h=r.sent(),"acyncFailedHandler"in this&&this.acyncFailedHandler(h,t),this.isAsyncLoading=!1,this.isAsyncLoaded=!1,this.isAsyncFailed=!0,h.zone="async-state",h;case 5:return this.isAsyncLoading=!1,this.isAsyncLoaded=!0,this.isAsyncFailed=!1,this.callHook("async::loaded"),this.$emit("state::loaded"),[2]}}))}))},_replaceAsyncState:function(e,t){return void 0===t&&(t=void 0),(0,r.__awaiter)(this,void 0,Promise,(function(){var n,o,c,l,d,f,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e.isSkip?[4,this.destroyWidget()]:[3,2];case 1:r.sent(),r.label=2;case 2:if(o=(n=this).asyncWidgetMapper,c=n.asyncSharedMapper,l=n.vertical,!e||"object"!=typeof e)throw new S.H(w._.WIDGET_ASYNC_EMPTY_RESPONSE);return d=e.state,f=e.verticalShared,h=e.trackingPayloads,d&&Object.keys(d).length&&(o&&"function"==typeof o&&(d=o(d,t)),this.setWidgetState(d)),f&&Object.keys(f).length&&(c&&"function"==typeof c&&(f=c(f)),this._replaceSharedStoreAction({vertical:l,verticalShared:f})),h&&Object.keys(h).length?[4,(0,E.l)(this).setTrackingPayloads(h)]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},_getAsyncWidgetApi:function(){var e=h.i.use(T.E);return e.widget.bind(e)},_tryToLoadOnMount:function(){return(0,r.__awaiter)(this,void 0,Promise,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return this._isAsyncByType(I.m.TYPE_ON_PAGE_LOAD)?[4,this.fetchAsyncState()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},_tryToRegisterViewEvent:function(){this._isAsyncByType(I.m.TYPE_ON_VIEWPORT)&&this.registerViewportEvent(this.fetchAsyncState,{once:!0})},_isAsyncByType:function(e){return this.asyncType===e&&this.asyncHash&&!this.isAsyncDelay}})},O=n("bd7eb"),P=n("65f40"),C={props:{trackingInfoProp:{type:[Object,String],default:function(){return{}}},trackingOn:{type:Boolean,default:!1},root:{type:Boolean,default:!1},widgetsStatisticsTrackerMetrics:{type:[Object,String],default:function(){return{}}}},provide:function(){return{sendAEventInjection:this.sendAEvent,getWidgetTokenInjection:this.getWidgetToken}},computed:{trackingInfo:function(){return"string"==typeof this.trackingInfoProp?JSON.parse(this.trackingInfoProp):this.trackingInfoProp}},mounted:function(){var e=(0,E.l)(this),t=(e.state._get("o3Params.x-o3-tracker-manager")||"on"===(0,P.ej)("tracker_manager"))&&this.$el instanceof HTMLElement,n=(e.state._get("o3Params.x-o3-tracker-metrics")||"on"===(0,P.ej)("tracker_metrics"))&&this.$el instanceof HTMLElement,r=f()(this,"trackingInfo.id");if(t&&r&&(this.$el.dataset.trackWidgetName=f()(this,"trackingInfo.name"),this.$el.dataset.version=f()(this,"version"),this.$el.dataset.vertical=f()(this,"vertical"),this.$el.dataset.widgetName=f()(this,"componentName"),this.$el.dataset.widgetId=r,this.$el.dataset.pageType=e.state._get("pageInfo.pageType")),n&&t&&r&&(this.$el.dataset.widgetsStatisticsTrackerMetrics=f()(this,"widgetsStatisticsTrackerMetrics")),this.trackingOn)return null==this.asyncType?this._registerSendViewEvent():void this.hook("async::loaded",this._delayRegisterViewEvent,{once:!0})},methods:{getWidgetToken:function(){return this.widgetToken},sendAEvent:function(e,t){var n={widgetToken:this.widgetToken,pageToken:this.pageToken,userToken:this.userToken};return this.$tracker.legacyAnalyticsByKeyService.send(n,e,t,this.isTrinityEvent)},_delayRegisterViewEvent:function(){if(this.widgetInViewport)return this._sendViewEvent();this._registerSendViewEvent()},_registerSendViewEvent:function(){this.registerViewportEvent(this._sendViewEvent,{once:!0})},_sendViewEvent:function(){this._sendAnalyticEvent(O.rr.WIDGET_VIEW_ACTION)},_sendAnalyticEvent:function(e){if(this.root)return!1;var t;if(this.isTrinityEvent){if(t=(0,O.zl)(),!this.widgetToken){var n=new k.m(w._.WIDGET_NOT_FOUND_TRACKER_TOKEN);n.setPayloadValue("vertical",f()(this,"vertical")),n.setPayloadValue("component",f()(this,"componentName")),n.setPayloadValue("widget",f()(this,"widget")),n.setPayloadValue("stateId",f()(this,"stateId")),this.$logger.error(n)}this.$tracker.sendTrinityEvent({actionType:e,uuid:t,pageToken:this.pageToken,widgetToken:this.widgetToken,userToken:this.userToken})}if(!this.disableSendWidgetViewCE){var r={actionType:e,widget:this.trackingInfo};this.isTrinityEvent&&(r.uuid=t),this.$tracker.sendComposerEvent(r)}}},mixins:[N,v,(0,E.Q)({pageToken:function(e){return e._get("pageToken","")},userToken:function(e){return e._get("userToken","")},isTrinityEvent:function(e){return e._get("experimentsConfig.isTrinityEvent",!1)},disableSendWidgetViewCE:function(e){return e._get("experimentsConfig.disableSendWidgetViewCE",!1)}})]},x={props:{widgetsStatisticsTrackerMetrics:{type:[Object,String],default:function(){return{}}}},mounted:function(){var e=((0,E.l)(this).state._get("o3Params.x-o3-tracker-metrics")||"on"===(0,P.ej)("tracker_metrics"))&&this.$el instanceof HTMLElement,t=f()(this,"trackingInfo.id");e&&t&&(this.$el.dataset.widgetId=t,this.$el.dataset.widgetsStatisticsTrackerMetrics=f()(this,"widgetsStatisticsTrackerMetrics"))}},A=n("5b524"),R={mixins:[(0,E.Q)({toolbarFlag:function(e){return e._get("o3Params."+A.t)}})],computed:{_showWidgetInfo:function(){return this.toolbarFlag&&this.$el instanceof HTMLElement&&this._widgetId},_widgetId:function(){return f()(this,"trackingInfo.id")}},methods:{handlerLoaderNextPage:function(e){if(this._showWidgetInfo){var t=document.querySelector("#debug-tool");t&&(t.dispatchEvent(new CustomEvent("loadNextPage",{detail:{widgetId:this._widgetId,value:e}})),this.$el.dataset.layoutId=e.layoutTrackingInfo.layoutId,this.$el.dataset.layoutName=e.layoutTrackingInfo.layoutContainer,this.$el.dataset.layoutVersion=e.layoutTrackingInfo.layoutVersion)}}},mounted:function(){if(this._showWidgetInfo){if(this.$el.dataset.widgetId=this._widgetId,this.$el.dataset.widgetName=f()(this,"componentName"),this.$el.dataset.vertical=f()(this,"vertical"),this.$el.dataset.version=f()(this,"version"),"paginator"===f()(this,"componentName")&&this.widgetInitialState.nextPage){var e=this.widgetInitialState.nextPage,t=new URL(e,"https://ozon.ru"),n=Number(t.searchParams.get("layout_page_index"));this.$el.dataset.currentPage=n}"megaPaginator"===f()(this,"componentName")&&this.currentPage&&(this.$el.dataset.currentPage=this.currentPage,this.$el.dataset.totalPages=this.totalPages)}}},j=n("7dacc"),$={beforeCreate:function(){if((0,E.l)(this).state._get("o3Params.x-o3-sitespeed-enable")){var e=(0,j.L2)(this.$options);performance.mark("BEFORE_CREATE:"+e),this.$once("hook:mounted",(function(){performance.mark("MOUNTED:"+e),performance.measure("MOUNT:"+e,"BEFORE_CREATE:"+e,"MOUNTED:"+e)}))}}},M=n("06040"),L=n("7e2f3"),D={name:"BaseWidget",inheritAttrs:!1,data:function(){return{widgetState:this.widgetInitialState}},mixins:[v,C,N,x,n("0e7b3").Z,$,R],props:M.t,inject:{$informPaginatorMounted:{default:null},isMobile:{default:!1},isAccessibilityMode:{default:!1},useWidgetRender:{default:!1}},mounted:function(){var e=this;this.$el&&"function"==typeof this.$el.setAttribute&&this.$el.setAttribute("data-widget",this.componentName),this.$nextTick((function(){e.$informPaginatorMounted&&e.$informPaginatorMounted(e.stateId)}))},beforeCreate:function(){this.$options.propsData},created:function(){var e,t=this,n=this,r=n.widgetInitialState,o=n.stateId,c=n.asyncType;this.widgetInitialState&&Object.keys(this.widgetInitialState).length&&h.i.use(L.F).next(((e={})[this.stateId]=this.widgetInitialState,e),{silent:!0}),this.stateSubscription=h.i.use(L.F).onNextState((function(e){null!==e&&null!=e[o]&&e[o]!==t.widgetState&&t.setWidgetState(e[o])}));try{(0,j.Yw)(r,o,void 0!==c)}catch(e){this.logError(e)}},beforeDestroy:function(){this.stateSubscription&&this.stateSubscription.unsubscribe()},computed:{groupStatePath:function(){return[this.vertical,this.componentName].join(".")}},methods:{destroyWidget:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,h.i.use(y.w).removeWidgetByStateId(this.stateId)];case 1:return e.sent(),[2]}}))}))},setWidgetState:function(e){var t,n=this,r=(0,j.V0)(e,(function(e){return n.logError(e)}));h.i.use(L.F).next(((t={})[this.stateId]=r,t),{silent:!0}),this.widgetState=r,void 0===this.asyncType&&this.$emit("state::loaded")},setWidgetStateValue:function(path,e){var t;return h.i.use(L.F).next(((t={})[this.stateId]=this.widgetState,t),{silent:!0}),l.vueSet(this.widgetState,path,e)},setWidgetPlaceholders:function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,h.i.use(y.w).setWidgetPlaceholderByStateId({stateId:this.stateId,placeholder:{name:e,widgets:t}})];case 1:return n.sent(),[2]}}))}))},notEmptyPlaceholder:function(e){var t=(0,j.ph)(this.placeholders,e);return!!t&&Boolean(t.widgets.length)},getPlaceholderWidgets:function(e){var t=(0,j.ph)(this.placeholders,e);return t?t.widgets:[]},getLoggerParams:function(){var e=this;return{widget:e.componentName,stateId:e.stateId,vertical:e.vertical,error:f()(this,"widgetState.error")}},logError:function(e){var t=this.getLoggerParams();e.setPayloadValue("widget",t.widget),e.setPayloadValue("stateId",t.stateId),e.setPayloadValue("error",t.error),e.setPayloadValue("vertical",t.vertical),this.$logger.error(e)}}},W=c().extend(D)},ee703:function(e,t,n){"use strict";var r=n("f1a8a");t.Z=function(e){return{extends:r.Z,data:function(){return{type:e}}}}},"5a2c0":function(e,t,n){"use strict";var r=n("8a482"),o=n("28508");t.Z={name:"ComposerLoadingMixin",mixins:[(0,o.Q)({loading:function(e){return e._get("shared.loading")}})],data:function(){return{isMounted:!1}},mounted:function(){this.isMounted=!0},computed:{isComposerLoading:function(){return this.loading===r.Zs&&this.isMounted}}}},"0e7b3":function(e,t,n){"use strict";var r=n("88568");function o(e,t,n){if(n.once)this.composerRouter.once(e,t);else{var r=this.composerRouter.on(e,t);r&&this.unsubscribes.push(r)}}t.Z={name:"ComposerRouterMixin",beforeCreate:function(){this.composerRouter=r.Router.getInstance(),this.unsubscribes=[]},computed:{routeLoading:function(){return this.composerRouter.loading},routeStatus:function(){return this.composerRouter.status}},methods:{beforeRouteLeave:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.BEFORE_ROUTE_LEAVE,e,t)},afterRouteEnter:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.AFTER_ROUTE_ENTER,e,t)},beforeUrlChange:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.BEFORE_URL_CHANGE,e,t)},afterUrlChange:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.AFTER_URL_CHANGE,e,t)},startRouteLoading:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.START_ROUTE_LOADING,e,t)},endRouteLoading:function(e,t){void 0===t&&(t={once:!1}),o.call(this,r.EContextHook.END_ROUTE_LOADING,e,t)}},beforeDestroy:function(){if(this.unsubscribes.length){for(var i=0;i<this.unsubscribes.length;i++){var e=this.unsubscribes[i];e&&e()}this.unsubscribes=[]}}}},"056e3":function(e,t,n){"use strict";function r(e){return void 0===e&&(e=10),{data:function(){return{displayPriority:0}},mounted:function(){this.runDisplayPriority()},methods:{runDisplayPriority:function(){var t=this,n=function(){requestAnimationFrame((function(){t.displayPriority++,t.displayPriority<e&&n()}))};n()},defer:function(e){return this.displayPriority>=e}}}}n.d(t,{N:function(){return r}})},a1c97:function(e,t,n){"use strict";var r=n("98bae"),o=n("21bdb"),c=n.n(o),l=n("f9fa4"),d=n("739f8"),f=n("8aae8");t.Z={name:"SwPrefetchMixin",methods:{swPrefetchNextPage:function(e){if(e){var t=e.nextPage,n=c()(e,"browser.useSW"),o=c()(e,"client.platform"),h=document.cookie||"",y=(0,d.Jl)(this.$config.get("apiGateway"));if(n&&window.$workbox&&t){var v=(0,r.__assign)((0,r.__assign)({Accept:"application/json","Content-Type":"application/json"},(0,f.d)(o)),{cookie:h});(0,l.tj)({action:"PREFETCH_NEXT_PAGE",API_URL_BROWSER:y,headers:v,nextPage:t})}}}}}},"6f697":function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n("28508"),o={methods:{trackWidgetsTimeSpent:function(e,t){void 0===t&&(t=!1);var n=window.__ClientMetrics__;if(Boolean(n)&&Boolean(n.trackWidgetsTimeSpent)&&"function"==typeof n.trackWidgetsTimeSpent){var o=(0,r.l)(this),c=o.state._get("layout"),l=o.state._get("pageInfo.url");n.trackWidgetsTimeSpent(l,e,c,t)}}}};t.Z=o},e1ddc:function(e,t,n){"use strict";var r=n("0558e");t.Z={inheritAttrs:!1,computed:{showWidget:function(){return!this.hasWidgetError&&(Object.keys(this.widgetState).length||this.asyncType===r.m.TYPE_ON_VIEWPORT)},hasWidgetError:function(){return this.widgetState.error}},inject:{$isMobile:{from:"isMobile",default:!1}}}},"977b0":function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n("88568"),o=n("d5932"),c=n("28508"),l={name:"IndeterminateLoader",mixins:[n("0e7b3").Z,(0,c.Q)({forceHideModal:function(e){return e._get("o3Params."+o.F)}})],data:function(){return{percent:0,show:!1,succeed:!0}},mounted:function(){this.startRouteLoading(this.start),this.endRouteLoading(this.finish)},beforeDestroy:function(){this.clear()},methods:{clear:function(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start:function(){var e=this;this.clear(),this.percent=0,this.succeed=!0,this._throttle=setTimeout((function(){return e.startTimer()}),100)},finish:function(e){var t=e.status;if(t===r.EComposerRouterStatus.LOADING_CANCELLED)return this.clear(),!1;t===r.EComposerRouterStatus.LOADING_FAILURE&&(this.succeed=!1),this.percent=100,this.hide()},hide:function(){var e=this;this.clear(),setTimeout((function(){e.show=!1,e.$nextTick((function(){e.percent=0}))}),500)},startTimer:function(){var e=this;this.show||(this.show=!0),this._timer=setInterval((function(){e.percent=Math.min(100,Math.floor(e.percent+3))}),100)}},render:function(e){var t;if(!this.show||this.forceHideModal)return e("");var n={staticClass:this.$style.loader,class:(t={},t[this.$style.succeed]=this.succeed,t[this.$style.failed]=!this.succeed,t),style:{width:this.percent+"%"}};return e("div",{staticClass:this.$style.progress},[e("div",n)])}},d={progress:"a",loader:"a0",succeed:"a1",failed:"a2"},f=n("aa393");var h=n.n(f)()(l,undefined,undefined,!1,(function(e){this.$style=d.locals||d}),null,null).exports},"3c2c0":function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n("98bae"),o=n("88568"),c=n("32cd6"),l=n("f8cd8"),d=n("02ec6"),f={UNSET:"",SELF:"_self",BLANK:"_blank",PARENT:"_parent",TOP:"_top"},h="noopener",y=function(e,t,n,c){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var h,y,v,_,m,w;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return h=o.Router.getInstance(),!t.target&&e.href||!n.click?(y=!!c&&(c.ctrlKey||c.metaKey||2===c.which||e.target===f.BLANK||"auxclick"===c.type),n.click&&n.click(c),c.defaultPrevented?[2,!1]:"#"===e.href[0]?(v=(0,l.E)(e.href),_=v.hash,m=v.offsetTop,w=m?{offsetTop:m}:void 0,(0,d.ZP)("#"+_,300,w),[2]):(c.preventDefault(),e.href.startsWith("http")?[2,h.redirect(e.href,y?"_blank":"_self")]:y?(h.redirect(e.href,"_blank"),[3,3]):[3,1])):(n.click(c),[2]);case 1:return[4,h[e.method](e.href,{silent:e.silent,scroll:e.scroll})];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},v={name:"ComposerLink",functional:!0,props:{href:c.default.oneOfType([c.default.string,c.default.bool]).def(!1),method:c.default.string.def("push"),silent:c.default.bool.def(!1),target:c.default.oneOf(Object.values(f)).def(f.UNSET),scroll:c.default.bool.def(!0)},render:function(e,t){var data=t.data,n=t.props,o=t.listeners,c=t.children;return data.attrs=data.attrs||{},n.target===f.BLANK&&-1===(data.attrs.rel||"").indexOf(h)&&(data.attrs.rel=data.attrs.rel?data.attrs.rel+" "+h:h),e("a",(0,r.__assign)((0,r.__assign)({},data),{attrs:(0,r.__assign)((0,r.__assign)({},data.attrs),{target:n.target||!1,href:n.href||!1}),on:(0,r.__assign)((0,r.__assign)({},o),{click:function(e){return y(n,data.attrs,o,e)},auxclick:function(e){return y(n,data.attrs,o,e)}})}),c)}},_=n("aa393"),m=n.n(_)()(v,undefined,undefined,!1,null,null,null).exports},f1a8a:function(e,t,n){"use strict";n.d(t,{Z:function(){return template}});var r=n("b6e4b"),o=n("fc151"),c=n("e799c"),l={name:"ErrorCapture",props:{widget:{type:[Function,String],required:!0},widgetProps:{type:Object,default:function(){return{}}},platform:{type:String,default:""}},data:function(){return{error:!1}},computed:{errorCheckWidget:function(){return this.error?"div":this.widget}},errorCaptured:function(e,t){var n=(0,c.A)(t),l=null!==n&&"function"==typeof n.getLoggerParams,d=function(e,t){if(!t)return r._.UNCORRECT_WIDGET;if(e){var n=r._.WIDGET_RENDER_ERROR;return n.zone="rendering",n}return r._.UNKNOWN_WIDGET_ERROR}(e.message,l),f=new o.m(d);if(f.setPayloadValue("error",e.message),f.setPayloadValue("stack",e.stack),f.setPayloadValue("component",t.$options.name),e.zone&&(d.zone=e.zone),"async-state"===e.zone&&f.setPayloadValue("response",e.response),l){var h=n.getLoggerParams();f.setPayloadValue("widget",h.widget),f.setPayloadValue("stateId",h.stateId),f.setPayloadValue("vertical",h.vertical)}return this.$logger.error(f),this.error=!0,!1}},d=n("aa393"),f=n.n(d),h=f()(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.errorCheckWidget,e._g(e._b({tag:"component"},"component",e.widgetProps,!1),e.$listeners))}),[],!1,null,null,null).exports,y=n("98bae"),v=n("21bdb"),_=n.n(v),m={};function w(e){return void 0===e&&(e=""),e.charAt(0).toUpperCase()+e.substr(1)}var k=n("22321"),S={};var T=n("28508"),I={name:"WidgetDisallowMixin",computed:{widgets:function(){for(var e=[],t=this.placeholders[this.placeIndex]||{},n=t.widgets&&t.widgets.length?t.widgets:[],r=0;r<n.length;r++)e.push(Object.assign({},n[r],{index:r}));return e},placeIndex:function(){if(!Array.isArray(this.placeholders))return-1;for(var i=0;i<this.placeholders.length;i++)if(this.placeholders[i].name===this.place)return i;return-1}},methods:{getAllowedComponents:function(e,t,n,r,o){void 0===n&&(n=[]);for(var c,l,d={allowed:[],disallowed:[],nonexistent:[]},i=0;i<n.length;i++){var f=n[i],component=(0,y.__assign)({},f),h=(c=component.vertical,l=component.component,void 0===c&&(c=""),void 0===l&&(l=""),m[c]||(m[c]={}),m[c][l]||(m[c][l]=w(c)+w(l)),m[c][l]);component.name=h,component.index=i,S[h]||(S[h]={}),S[h][t]||(S[h][t]=(o[h]||[]).indexOf(t)>-1);var v=S[h][t]?"allowed":"disallowed";void 0===r[h]&&(v=(0,k.J5)(component.vertical,e)&&!(0,k.ds)(component.vertical)?"allowed":"nonexistent"),d[v].push(component)}return d},sendDisallow:function(e,t){var n=t.map((function(component){return component.name})),component=_()(this.$parent,"$vnode.componentOptions.tag");e.setPayloadValue("component",component),e.setPayloadValue("disallowNames",n),e.setPayloadValue("placeholderName",this.placeholderName),this.$logger.error(e)},checkDisallow:function(e){void 0===e&&(e=[]);try{this.validateDisallow(e)}catch(t){this.sendDisallow(t,e)}},validateDisallow:function(e){void 0===e&&(e=[]);var t=(0,T.l)(this).state._get("o3Params.x-o3-disable-placements"),n=this.$config.get("useDisallowWidgets");if(e.length&&n&&"true"!==t)throw r._.WIDGET_CANT_BE_RENDERED.zone="rendering-placeholder",new o.m(r._.WIDGET_CANT_BE_RENDERED)},sendNonexistent:function(e,t){var n=t.map((function(component){return component.name})),component=_()(this.$parent,"$vnode.componentOptions.tag");e.setPayloadValue("component",component),e.setPayloadValue("nonexistNames",n),e.setPayloadValue("placeholderName",this.placeholderName),this.$logger.error(e)},checkNonexistent:function(e){void 0===e&&(e=[]);try{if(e.length){var t=r._.WIDGET_NOT_FOUND;throw t.zone="unfound",new o.m(t)}}catch(t){this.sendNonexistent(t,e)}}}},E=n("5ea39"),N=function(e,t,n,c,l,d,f){void 0===f&&(f=!1);var content=t[c],component=content;if(!content&&!f&&(0,k.J5)(n,e)&&!(0,k.ds)(n))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return(0,k.Kl)(n,e).then((function(){return N(e,t,n,c,l,d,!0).apply(void 0,(0,y.__spread)(r))}))};if("function"==typeof content)return content;if("object"!=typeof content){if((0,k.J5)(n,e)){var h=r._.WIDGET_NOT_FOUND;h.zone="unfound";var v=new o.m(h);throw v.setPayloadValue("disallowNames",[c]),v}throw new E.H(r._.WRONG_WIDGET_CONTENT)}if(content.desktop&&content.mobile&&(component=component[d]),"function"==typeof component)return component;if(!component.versions)throw new E.H(r._.WRONG_WIDGET_VERSION);return"1"===l||component.default&&Object.keys(component.versions).length&&!component.versions[l]?component.default:component.versions[l]},O=n("145fc"),P=n("9e825"),C=n("7e2f3"),x=n("056e3"),A={name:"PlaceholderRenderMixin",data:function(){return{isServer:Boolean(!1)}},mixins:[(0,x.N)(),I,(0,T.Q)({platform:function(e){return e._get("client.platform","undefined")},disableLayoutPath:function(e){return e._get("experimentsConfig.disableLayoutPath")}})],inject:{$informPaginatorMounted:{default:null},isMobile:{default:!1},layoutPath:{default:""},useWidgetRender:{default:!1},useBlockRender:{default:!1}},computed:{placeholderName:function(){return[this.type,this.place].join(".")},useDefaultRender:function(){return!this.useWidgetRender&&!this.useBlockRender},usePartialRender:function(){return this.useWidgetRender||this.useBlockRender},replaceLayoutPath:function(){if(this.disableLayoutPath)return this.placeholderName;var path=this.layoutPath;return this.placeIndex<0?path:path+"["+this.placeIndex+"]"},renderingComponents:function(){var e=this.getAllowedComponents((0,T.l)(this),this.placeholderName,this.widgets,O.Z.content||{},O.Z.places||{}),t=e.allowed,n=e.disallowed,r=e.nonexistent;if(n&&n.length&&this.$informPaginatorMounted)for(var i=0;i<n.length;i++){var o=n[i];this.$informPaginatorMounted(o.stateId)}return this.checkDisallow(n),this.checkNonexistent(r),t}},methods:{createComponent:function(component){try{var e=this.getComponentsContent(),t=this.isMobile?"mobile":"desktop",n=component.version&&component.version.toString()||"1";return N((0,T.l)(this),e,component.vertical,component.name,n,t)}catch(e){return this.$logger.error(e),"div"}},getWidgetProps:function(e){var t=e.params,n=e.widgetTrackingInfo,r=this.$config.get("memcachedEnable"),o={};"string"==typeof t?o=JSON.parse(t):"object"==typeof t&&(o=(0,y.__assign)({},t));var c=r&&e.etag?e.etag:null;return Object.assign(o,{componentName:e.component,asyncType:e.asyncType,asyncHash:e.asyncData,trackingOn:e.trackingOn,vertical:e.vertical,stateId:e.stateId,version:e.version,placeholders:e.placeholders,root:e.root,widgetToken:e.widgetToken,trackingInfoProp:n,widgetsStatisticsTrackerMetrics:e.widgetsStatisticsTrackerMetrics,etag:c,fromCache:!1,widgetInitialState:this.parseWidgetInitialState(e)})},parseWidgetInitialState:function(e){var t;if(e.stateId){var n=document.getElementById("state-"+e.stateId),r=n&&n.getAttribute("data-state"),o=_()(P.i.use(C.F),"value["+e.stateId+"]")||r;"string"==typeof o&&(o=JSON.parse(o)),t=o||{}}return t},getComponentsContent:function(){return O.Z.content||{}}}},R={components:{ErrorCapture:h},mixins:[A],props:{placeholders:{type:Array,default:function(){return[]}},place:{type:String,default:"default"},tagName:{type:String,default:"div"}}},template=f()(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.useDefaultRender||e.usePartialRender&&!e.isServer?n(e.tagName,{tag:"component"},[e._l(e.renderingComponents,(function(t,r){return[e.defer(t.defer||0)?n("ErrorCapture",e._g({key:(t.stateId||"empty")+"-"+r,attrs:{widget:e.createComponent(t),"widget-props":e.getWidgetProps(t),platform:e.platform}},e.$listeners)):e._e()]}))],2):e.placeIndex<0?n(e.tagName,{tag:"component",attrs:{"data-widget-disallow":e.replaceLayoutPath}}):n(e.tagName,{tag:"component",attrs:{"data-replace-layout-path":e.replaceLayoutPath}},[e._v("#CONTENT#")])}),[],!1,null,null,null).exports}}]);