!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t=Array.isArray,r="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")(),s=i.Symbol,o=Object.prototype,a=o.hasOwnProperty,c=o.toString,u=s?s.toStringTag:void 0;var d=function(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var i=c.call(e);return n&&(t?e[u]=r:delete e[u]),i},l=Object.prototype.toString;var h=function(e){return l.call(e)},f=s?s.toStringTag:void 0;var p=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?d(e):h(e)};var v=function(e){return null!=e&&"object"==typeof e};var g=function(e){return"symbol"==typeof e||v(e)&&"[object Symbol]"==p(e)},b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/;var m=function(e,r){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!g(e))||(y.test(e)||!b.test(e)||null!=r&&e in Object(r))};var E=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var w,_=function(e){if(!E(e))return!1;var t=p(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},T=i["__core-js_shared__"],S=(w=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"";var O=function(e){return!!S&&S in e},I=Function.prototype.toString;var P=function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""},k=/^\[object .+?Constructor\]$/,j=Function.prototype,R=Object.prototype,A=j.toString,C=R.hasOwnProperty,H=RegExp("^"+A.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var N=function(e){return!(!E(e)||O(e))&&(_(e)?H:k).test(P(e))};var U=function(e,t){return null==e?void 0:e[t]};var L=function(e,t){var r=U(e,t);return N(r)?r:void 0},D=L(Object,"create");var x=function(){this.__data__=D?D(null):{},this.size=0};var F=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},M=Object.prototype.hasOwnProperty;var q=function(e){var t=this.__data__;if(D){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return M.call(t,e)?t[e]:void 0},z=Object.prototype.hasOwnProperty;var V=function(e){var t=this.__data__;return D?void 0!==t[e]:z.call(t,e)};var $=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=D&&void 0===t?"__lodash_hash_undefined__":t,this};function B(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}B.prototype.clear=x,B.prototype.delete=F,B.prototype.get=q,B.prototype.has=V,B.prototype.set=$;var G=B;var W=function(){this.__data__=[],this.size=0};var K=function(e,t){return e===t||e!=e&&t!=t};var X=function(e,t){for(var r=e.length;r--;)if(K(e[r][0],t))return r;return-1},J=Array.prototype.splice;var Y=function(e){var t=this.__data__,r=X(t,e);return!(r<0)&&(r==t.length-1?t.pop():J.call(t,r,1),--this.size,!0)};var Q=function(e){var t=this.__data__,r=X(t,e);return r<0?void 0:t[r][1]};var Z=function(e){return X(this.__data__,e)>-1};var ee=function(e,t){var r=this.__data__,n=X(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}te.prototype.clear=W,te.prototype.delete=Y,te.prototype.get=Q,te.prototype.has=Z,te.prototype.set=ee;var re=te,ne=L(i,"Map");var ie=function(){this.size=0,this.__data__={hash:new G,map:new(ne||re),string:new G}};var se=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var oe=function(e,t){var r=e.__data__;return se(t)?r["string"==typeof t?"string":"hash"]:r.map};var ae=function(e){var t=oe(this,e).delete(e);return this.size-=t?1:0,t};var ce=function(e){return oe(this,e).get(e)};var ue=function(e){return oe(this,e).has(e)};var de=function(e,t){var r=oe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function le(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}le.prototype.clear=ie,le.prototype.delete=ae,le.prototype.get=ce,le.prototype.has=ue,le.prototype.set=de;var he=le;function fe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(fe.Cache||he),r}fe.Cache=he;var pe=fe;var ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,be=function(e){var t=pe(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ve,(function(e,r,n,i){t.push(n?i.replace(ge,"$1"):r||e)})),t}));var ye=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},me=s?s.prototype:void 0,Ee=me?me.toString:void 0;var we=function e(r){if("string"==typeof r)return r;if(t(r))return ye(r,e)+"";if(g(r))return Ee?Ee.call(r):"";var n=r+"";return"0"==n&&1/r==-Infinity?"-0":n};var _e=function(e){return null==e?"":we(e)};var Te=function(e,r){return t(e)?e:m(e,r)?[e]:be(_e(e))};var Se=function(e){if("string"==typeof e||g(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Oe=function(e,t){for(var r=0,n=(t=Te(t,e)).length;null!=e&&r<n;)e=e[Se(t[r++])];return r&&r==n?e:void 0};var Ie,Pe,ke=function(e,t,r){var n=null==e?void 0:Oe(e,t);return void 0===n?r:n},je=(function(e,t){function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(ke),s=Object.freeze({__proto__:null});function o(e){const t=e.serverTiming,r=t&&t.find((({name:e})=>"RequestID"===e));return r&&r.description||""}async function a(){const e=await navigator.permissions.query({name:"notifications"});return"denied"===Notification.permission&&"prompt"===e.state}async function c(e,t){if(!navigator.permissions)return!1;try{const r=e?await async function(e){return Promise.race([a(),(t=e||100,r=!0,new Promise((e=>setTimeout((()=>e(r)),t))))]);var t,r}(t):await a();return r}catch(e){}return!1}!function(e){e.SITESPEED="sitespeed",e.UITESTS="ui-tests",e.WEBDRIVER="webdriver",e.HEADLESS="headless"}(n||(n={}));const u=async({isSiteSpeed:e,isUiTests:t,needDetectHeadless:r,detectHeadlessTimeout:s})=>{const o=await(async({isSiteSpeed:e,isUiTests:t,needDetectHeadless:r,detectHeadlessTimeout:i})=>{let s="";return e?s=n.SITESPEED:t?s=n.UITESTS:await c(r,i)?s=n.HEADLESS:window.navigator.webdriver&&(s=n.WEBDRIVER),s})({isSiteSpeed:e,isUiTests:t,needDetectHeadless:r,detectHeadlessTimeout:s});return{...o?{testingToolName:o}:{},screenResolutionX:i.default(window,"screen.width"),screenResolutionY:i.default(window,"screen.height"),screenPixelDensity:i.default(window,"devicePixelRatio"),effectiveConnectionType:i.default(window,"navigator.connection.effectiveType"),referrer:i.default(window,"document.referrer"),os:i.default(window,"navigator.userAgentData.platform")}};var d,l;!function(e){e.MARK="mark",e.MEASURE="measure",e.NAVIGATION="navigation",e.RESOURCE="resource",e.LONGTASK="longtask",e.PAINT="paint",e.ELEMENT="element",e.EVENT="event",e.FID="first-input",e.CLS="layout-shift",e.LCP="largest-contentful-paint"}(d||(d={})),function(e){e.NAVIGATION="navigation",e.CSS="css",e.SCRIPT="script",e.XHR="xmlhttprequest",e.FETCH="fetch",e.BEACON="beacon",e.VIDEO="video",e.AUDIO="audio",e.TRACK="track",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.A="a",e.IFRAME="iframe",e.FRAME="frame",e.OTHER="other"}(l||(l={}));const h=()=>{return(e=d.NAVIGATION,performance.getEntriesByType(e))[0];var e};class f{config;getWebVitals;constructor(e){this.config=e,this.getWebVitals=(()=>{let e=0,t=0,r=0,n=0;return new PerformanceObserver((t=>{for(const r of t.getEntries())r.hadRecentInput||(e+=Number(r.value))})).observe({type:d.CLS,buffered:!0}),new PerformanceObserver((e=>{for(const r of e.getEntries())t=r.processingStart-r.startTime})).observe({type:d.FID,buffered:!0}),new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];r=n.renderTime||n.loadTime})).observe({type:d.LCP,buffered:!0}),new PerformanceObserver((e=>{const t=e.getEntries();n=t.length})).observe({type:d.LONGTASK,buffered:!0}),()=>({cls:e,fid:t,lcp:r,lt:n})})()}async createEvent(e,t){return{browser:await u(this.config),...e.trackHTML?{htmlEvent:this.createHtmlEvent()}:{},...e.trackImages&&t.length?{htmlEvent:this.createImagesEvent(t)}:{},...e.trackScripts&&t.length?{htmlEvent:this.createScriptsEvent(t)}:{},...e.trackPagination&&t.length?this.createPaginationEvent(t):{}}}createHtmlEvent(){return{requestId:this.config.htmlRequestId,navigationTiming:h(),webVitals:this.getWebVitals()}}createImagesEvent(e){return{requestId:this.config.htmlRequestId,assets:{images:e.map((e=>({networkTiming:e})))}}}createScriptsEvent(e){return{requestId:this.config.htmlRequestId,assets:{scripts:e.map((e=>({networkTiming:e})))}}}createPaginationEvent(e){return{paginationEvents:e.map((e=>({requestId:o(e),networkTiming:e})))}}}var p;!function(e){e.START="start",e.END="end"}(p||(p={}));class v{heldEntries=[];sentEntries=[];capacity=20;constructor(e){this.capacity=void 0!==e.capacity?e.capacity:20}addHeldEntries(e,t=p.END){"start"===t?this.heldEntries.unshift(...e):this.heldEntries.push(...e)}addSentEntries(e){this.sentEntries.push(...e)}deleteHeldEntry(e){return"object"==typeof this.heldEntries[e]&&(this.heldEntries.splice(e,1),!0)}clearHeldEntries(){this.heldEntries=[]}clearSentEntries(){this.sentEntries=[]}isFull(){return this.heldEntries.length>=this.capacity}}const g={pageCloseEnabled:!0,capacity:20,sendTimeout:3e4,sendMethod:()=>Promise.resolve(!1)};class b{store;config;scheduledSendTimer;isOnUnload=!1;constructor(e){this.config=Object.assign({},e),this.store=new v({capacity:this.config.capacity}),this.scheduledSendTimer=((e,t)=>{let r;const n={start(){n.cancel(),r=window.setTimeout(e,t)},cancel(){window.clearTimeout(r),r=void 0}};return n})((()=>this.send()),this.config.sendTimeout||e.sendTimeout||g.sendTimeout),setTimeout((()=>{(e=>{const t=()=>{"hidden"===document.visibilityState&&(e(),window.removeEventListener("visibilitychange",t))};window.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",(()=>e()))})(this.flush.bind(this))}))}add(e,{forceSend:t=!1}={}){if(this.isOnUnload)return this.scheduledSendTimer.cancel(),void this.store.addHeldEntries([e]);this.store.addHeldEntries([e]),this.store.isFull()||t?this.flush():this.scheduledSendTimer.start()}flush(){this.scheduledSendTimer.cancel(),this.send()}async send(){const e=this.store.heldEntries.slice();e.length&&(this.config.sendMethod(e),this.store.clearHeldEntries(),this.store.addSentEntries(e))}}class y{observer;entriesBuffer;constructor(e){this.entriesBuffer=new b({...g,sendMethod:e}),this.observer=new PerformanceObserver(this.collectEntries),document.addEventListener("pagehide",this.stopCollectEntries)}collectEntries=e=>{e.getEntries().filter((e=>e.initiatorType===l.IMG||e.initiatorType===l.CSS&&/.(jpe?g|png|webp)/i.test(e.name))).forEach((e=>{this.entriesBuffer.add.call(this.entriesBuffer,e)}))};startCollectEntries(){this.observer.observe({type:"resource",buffered:!0})}stopCollectEntries=()=>{this.observer.disconnect()}}class m{observer;buffer;constructor(e){this.observer=new PerformanceObserver(this.collectScripts),this.buffer=new b({...g,sendMethod:e}),document.addEventListener("pagehide",this.stopCollectEntries)}startCollectEntries(){this.observer.observe({type:"resource",buffered:!0})}stopCollectEntries=()=>{this.observer.disconnect()};collectScripts=e=>{for(const t of e.getEntries())/\.js$/.test(t.name)&&this.buffer.add.call(this.buffer,t)}}class E{observer;builder;partUrl;send;destroyFunction;constructor({partUrl:e,sendMethod:t,builder:r,destroyFunction:n}){this.partUrl=e,this.send=t,this.builder=r,this.destroyFunction=n,this.observer=new PerformanceObserver(this.searchEntries),this.observer.observe({type:"resource",buffered:!0})}searchEntries=async e=>{const t=e.getEntries().find((e=>{e.name.includes(this.partUrl)}));if(t){const e=await this.builder.createEvent({trackPagination:!0},[t]);this.send(e),this.observer.disconnect(),this.destroyFunction(this.partUrl)}}}t.PerformanceTracker=class{config;builder;imagesObserver;scriptsObserver;paginationObservers={};constructor(e){this.config=e,this.builder=new f(this.config);const t=this.sendImages.bind(this),r=this.sendScripts.bind(this);e.trackImages&&(this.imagesObserver=new y(t),this.imagesObserver.startCollectEntries()),e.trackScripts&&(this.scriptsObserver=new m(r),this.scriptsObserver.startCollectEntries())}async onLoad(){const e=await this.builder.createEvent({trackHTML:!0},[]);return this.send(e)}async sendImages(e){const t=await this.builder.createEvent({trackImages:!0},e);return this.send(t)}async sendScripts(e){const t=await this.builder.createEvent({trackScripts:!0},e);return this.send(t)}trackPagination(e){this.paginationObservers[e]=new E({partUrl:e,sendMethod:this.send.bind(this),builder:this.builder,destroyFunction:this.destroyPaginationObserver.bind(this,e)})}destroyPaginationObserver(e){this.paginationObservers[e]=null}send(e){const t=JSON.stringify(e);return navigator.sendBeacon(this.config.endpoint,t)}},t.Types=s,t.extractRequestId=o,t.getBrowser=u,t.getNavigationTimings=h}(Ie={exports:{}},Ie.exports),Ie.exports);(Pe=je)&&Pe.__esModule&&Object.prototype.hasOwnProperty.call(Pe,"default")&&Pe.default;var Re=je.PerformanceTracker;je.Types;var Ae=je.extractRequestId;je.getBrowser;var Ce=je.getNavigationTimings;const He=()=>{const e=Ce();return Ae(e)};window.$perfTracker=new class{tracker;constructor(){window.onAppReady((()=>{const{isSiteSpeed:e,isUiTests:t,requestId:r,endpoint:n,trackImages:i,trackScripts:s,detectHeadless:o}=(()=>{const e=ke(window,"__NUXT__"),t=ke(e,"__CONFIG__");return{isSiteSpeed:ke(e,"state.o3Params.x-o3-sitespeed-enable"),isUiTests:ke(e,"state.o3Params.x-o3-ui-tests"),trackImages:ke(e,"state.experimentsConfig.trackImagesRum4"),trackScripts:ke(e,"state.experimentsConfig.trackScriptsRum4"),detectHeadless:ke(e,"state.experimentsConfig.detectHeadlessRum4"),requestId:He(),endpoint:`${ke(t,"xapiDomain")}/perf-metrics-collector/v4/rum/bx/web`,pageViewId:ke(window,"$tracker.pageViewId")}})();this.tracker=new Re({endpoint:n,isSiteSpeed:e,isUiTests:t,htmlRequestId:r,trackImages:i,trackScripts:s,needDetectHeadless:o,detectHeadlessTimeout:100});const a=async()=>{this.tracker&&await this.tracker.onLoad()&&window.removeEventListener("beforeunload",a)};window.addEventListener("beforeunload",a),"complete"===document.readyState?setTimeout(a,0):window.addEventListener("load",(()=>setTimeout(a,0)))}))}}}();
